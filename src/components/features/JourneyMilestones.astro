---
import journeyPhases from '../../data/journey-phases.json';

const phases = journeyPhases.phases;
const completedPhases = phases.filter(p => p.status === 'completed').length;
const progressPercent = Math.round((completedPhases / phases.length) * 100);
---

<section class="section bg-slate-50 dark:bg-slate-900/50">
  <div class="container">
    <div class="text-center mb-12">
      <span class="text-sm font-medium text-blue-600 dark:text-blue-400 uppercase tracking-wider">
        30-Day Journey
      </span>
      <h2 class="text-3xl md:text-4xl font-bold mt-2 mb-4">
        Portfolio Roadmap
      </h2>
      <p class="text-slate-600 dark:text-slate-400 max-w-2xl mx-auto">
        From fraud detection fundamentals to production-ready federated learning security
      </p>
    </div>

    <!-- Progress Bar -->
    <div class="max-w-3xl mx-auto mb-12">
      <div class="flex justify-between text-sm text-slate-600 dark:text-slate-400 mb-2">
        <span>Overall Progress</span>
        <span>{completedPhases}/{phases.length} phases ({progressPercent}%)</span>
      </div>
      <div class="h-3 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden">
        <div
          class="h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-500"
          style={`width: ${progressPercent}%`}
        ></div>
      </div>
    </div>

    <!-- Phase Cards -->
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
      {phases.map((phase) => (
        <div class={`relative p-6 rounded-xl border transition-all ${
          phase.status === 'completed'
            ? 'border-green-200 bg-green-50/50 dark:bg-green-900/10 dark:border-green-800'
            : phase.status === 'in-progress'
            ? 'border-blue-300 bg-blue-50/50 dark:bg-blue-900/10 dark:border-blue-700 ring-2 ring-blue-300 dark:ring-blue-600'
            : 'border-slate-200 bg-slate-50/50 dark:bg-slate-800/50 dark:border-slate-700 opacity-75'
        }`}>
          <!-- Status Dot -->
          <div class={`absolute -top-2 -right-2 w-4 h-4 rounded-full ${
            phase.status === 'completed'
              ? 'bg-green-500'
              : phase.status === 'in-progress'
              ? 'bg-blue-500 animate-pulse'
              : 'bg-slate-300 dark:bg-slate-600'
          }`}></div>

          <!-- Phase Header -->
          <div class="flex items-center gap-3 mb-3">
            <div class="flex items-center justify-center w-10 h-10 rounded-lg bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold text-sm">
              {phase.days}
            </div>
            <div>
              <h3 class="font-bold text-slate-900 dark:text-white">{phase.name}</h3>
              <span class={`text-xs ${
                phase.status === 'completed'
                  ? 'text-green-600 dark:text-green-400'
                  : phase.status === 'in-progress'
                  ? 'text-blue-600 dark:text-blue-400'
                  : 'text-slate-500'
              }`}>
                {phase.status === 'completed'
                  ? '‚úÖ Completed'
                  : phase.status === 'in-progress'
                  ? 'üîÑ In Progress'
                  : '‚è≥ Upcoming'}
              </span>
            </div>
          </div>

          <!-- Description -->
          <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">
            {phase.description}
          </p>

          <!-- Projects -->
          <div class="mb-3">
            <h4 class="text-xs font-semibold text-slate-500 uppercase mb-2">Projects</h4>
            <div class="flex flex-wrap gap-1">
              {phase.projects.map((proj) => (
                <span class="px-2 py-0.5 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 text-xs rounded border border-slate-200 dark:border-slate-600">
                  {proj}
                </span>
              ))}
            </div>
          </div>

          <!-- Skills -->
          <div>
            <h4 class="text-xs font-semibold text-slate-500 uppercase mb-2">Skills</h4>
            <div class="flex flex-wrap gap-1">
              {phase.skills.map((skill) => (
                <span class="px-2 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 text-xs rounded">
                  {skill}
                </span>
              ))}
            </div>
          </div>
        </div>
      ))}
    </div>

    <!-- CTA -->
    <div class="text-center mt-12">
      <a
        href="/journey"
        class="inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-lg shadow-blue-500/30 hover:-translate-y-0.5 transition-all"
      >
        View Full Journey Timeline
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </a>
    </div>
  </div>
</section>
